import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";import{o as d,f as c,r as x,b as i,t as f,i as T,s as v,a as k,w as h,d as g,c as y,g as b,q as _,m as B,I as $,F as C,K as E,p as w}from"./app-935e5f77.js";const S={},I={class:"inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"};function L(o,s){return d(),c("button",I,[x(o.$slots,"default")])}const q=m(S,[["render",L]]),D=["type"],j={__name:"SecondaryButton",props:{type:{type:String,default:"button"}},setup(o){return(s,r)=>(d(),c("button",{type:o.type,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[x(s.$slots,"default")],8,D))}},U={},N={class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"};function A(o,s){return d(),c("button",N,[x(o.$slots,"default")])}const V=m(U,[["render",A]]),P={components:{PrimaryButton:q,SecondaryButton:j,DangerButton:V},props:{id:{type:Number,required:!0},name:{type:String,required:!0},body:{type:String,required:!0},joined:{type:String,required:!0},posted:{type:String,required:!0},likes:{type:Number,required:!0},editable:{type:Boolean,required:!1,default:!1},owned:{type:Boolean,required:!1,default:!1}},data(){return{editing:!1,editedBody:"",liked:!1}},computed:{avatarUrl(){return`https://i.pravatar.cc/150?u=${this.name}`},canEditTweet(){return this.editable&&this.owned}},mounted(){localStorage.getItem(`liked_${this.id}`)&&(this.liked=!0)},methods:{deleteTweet(){console.log("function deleteTweet() executed"),this.$emit("delete-tweet",this.id)},editTweet(){console.log("function editTweet() executed"),this.editable&&(this.editing=!0,this.editedBody=this.body)},saveTweet(){console.log("function saveTweet() executed: "+this.editedBody+" :::"+this.body),this.editing=!1,this.$emit("edit-tweet",{id:this.id,body:this.editedBody}),localStorage.setItem(`tweet_${this.id}`,this.editedBody)},cancelEdit(){console.log("function cancelEdit() executed"),this.editing=!1},renderTweet(o){const s=document.createElement("div");s.classList.add("tweet");const r=document.createElement("p");return r.classList.add("body"),r.textContent=text,s.appendChild(r),s},toggleLike(){if(console.log("function toggleLike() executed"),localStorage.getItem(`liked_${this.id}`)){localStorage.removeItem(`liked_${this.id}`),this.$emit("unlike-tweet",this.id),this.liked=!1;return}localStorage.setItem(`liked_${this.id}`,!0),this.$emit("like-tweet",this.id),this.liked=!0}}},z={class:"flex bg-white shadow-sm rounded-lg w-full"},F={class:"flex items-start px-4 py-6 w-full"},M=["src","alt"],O={class:"w-full"},J={class:"flex items-center justify-between"},K={class:"text-lg font-semibold text-gray-900 -mt-1"},Y={class:"text-sm text-gray-700"},G={class:"text-gray-700"},H={key:0},Q={class:"mt-4 flex items-center gap-3"},R={key:1,class:"mt-3 text-gray-700 text-sm pt-2"},W={class:"mt-4 flex items-center"},X=["fill"],Z=i("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},null,-1),ee=[Z],te={class:"pl-3"},oe={class:"flex gap-4"};function ne(o,s,r,u,a,e){const n=_("PrimaryButton"),t=_("SecondaryButton"),l=_("DangerButton");return d(),c("div",z,[i("div",F,[i("img",{class:"w-12 h-12 rounded-full object-cover mr-4 shadow",src:e.avatarUrl,alt:r.name+" profile picture"},null,8,M),i("div",O,[i("div",J,[i("h2",K,f(r.name),1),i("small",Y,f(r.posted),1)]),i("p",G,"Joined "+f(r.joined),1),a.editing?(d(),c("div",H,[T(i("textarea",{"onUpdate:modelValue":s[0]||(s[0]=p=>a.editedBody=p),class:"focus:outline-none focus:ring-0 resize-none shadow-none h-auto w-full pt-2 p-0 mt-3 text-gray-700 text-sm"},null,512),[[v,a.editedBody]]),i("div",Q,[k(n,{onClick:e.saveTweet},{default:h(()=>[g("Save")]),_:1},8,["onClick"]),k(t,{onClick:e.cancelEdit},{default:h(()=>[g("Cancel")]),_:1},8,["onClick"])])])):(d(),c("p",R,f(r.body),1)),i("div",W,[i("div",{class:"flex items-center mr-2 text-gray-700 text-sm mr-3",onClick:s[1]||(s[1]=(...p)=>e.toggleLike&&e.toggleLike(...p))},[(d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:a.liked?"red":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-heart"},ee,8,X)),i("span",te,f(r.likes),1)]),i("div",oe,[e.canEditTweet&&!a.editing?(d(),y(n,{key:0,onClick:e.editTweet},{default:h(()=>[g("Edit")]),_:1},8,["onClick"])):b("",!0),e.canEditTweet&&!a.editing?(d(),y(l,{key:1,onClick:e.deleteTweet},{default:h(()=>[g("Delete")]),_:1},8,["onClick"])):b("",!0)])])])])])}const ie=m(P,[["render",ne]]),se={components:{Tweet:ie},props:{tweets:{type:Object,required:!0}},setup(){const o=B([]);return $(()=>{w.get("/tweets").then(e=>{o.value=e.data}).catch(e=>{console.error("An error occurred while fetching tweets.")}),window.Echo.channel("tweet").listen("TweetCreated",e=>{o.value.unshift(e.tweet),console.log(e.tweet)}).listen("TweetDeleted",e=>{console.warn("TweetDeleted");const n=o.value.findIndex(t=>t.id===e.tweet.id);console.warn(n),o.value.splice(n,1)}).listen("TweetUpdated",e=>{console.warn("TweetUpdated");const n=o.value.findIndex(t=>t.id===e.tweet.id);console.warn(n),o.value.splice(n,1,e.tweet)})}),{tweets:o,editTweet:(e,n)=>{console.log(`YAO: Editing tweet ${e} with body: ${n}`),w.put(`/tweet/${e}`,{body:n}).then(t=>{}).catch(t=>{console.error(`An error occurred while updating tweet ${e}.`)})},deleteTweet:e=>{w.delete(`/tweet/${e}`).then(()=>{}).catch(n=>{console.error(n)})},likeTweet:e=>{w.post(`/tweet/${e}/like`).then(n=>{const t=o.value.findIndex(l=>l.id===e);t!==-1&&o.value[t].likes++}).catch(n=>{console.error(`An error occurred while toggling like for tweet ${e}.`)})},unlikeTweet:e=>{w.post(`/tweet/${e}/unlike`).then(n=>{const t=o.value.findIndex(l=>l.id===e);t!==-1&&o.value[t].likes--}).catch(n=>{console.error(`An error occurred while toggling like for tweet ${e}.`)})}}}},re=i("h3",{class:"text-3xl font-bold pt-6 pb-3"},"Latest Tweets",-1),de={class:"flex flex-col gap-4"};function le(o,s,r,u,a,e){const n=_("Tweet");return d(),c("div",null,[re,i("div",de,[(d(!0),c(C,null,E(u.tweets,t=>(d(),y(n,{key:t.id,id:t.id,name:t.user.name,joined:t.user.created_at,posted:t.created_at,body:t.body,likes:t.likes,editable:t.editable,owned:t.editable,onEditTweet:l=>u.editTweet(t.id,l.body),onDeleteTweet:l=>u.deleteTweet(t.id),onLikeTweet:l=>u.likeTweet(t.id,l.body),onUnlikeTweet:l=>u.unlikeTweet(t.id)},null,8,["id","name","joined","posted","body","likes","editable","owned","onEditTweet","onDeleteTweet","onLikeTweet","onUnlikeTweet"]))),128))])])}const ue=m(se,[["render",le]]);export{ue as default};
